# Go 学习项目运行指南

## 环境准备

### 1. 安装 Go 环境

- 下载并安装 Go 1.21+ 版本
- 配置 GOPATH 和 GOROOT
- 验证安装：`go version`

### 2. 安装数据库（可选）

- MySQL 8.0+ （用于 GORM 和 Web API 示例）
- 创建数据库：`CREATE DATABASE go_demo;`

## 运行各模块代码

### 02-control-flow 控制流

#### 条件语句

```bash
cd 02-control-flow
go run conditions.go
```

#### 循环语句

```bash
cd 02-control-flow
go run loops.go
```

#### Switch语句

```bash
cd 02-control-flow
go run switch.go
```

### 03-functions 函数

#### 基础函数

```bash
cd 03-functions
go run basic_functions.go
```

#### 高级函数特性

```bash
cd 03-functions
go run advanced_functions.go
```

### 04-data-structures 数据结构

#### 数组和切片

```bash
cd 04-data-structures
go run arrays_slices.go
```

#### 映射(Map)

```bash
cd 04-data-structures
go run maps.go
```

#### 指针

```bash
cd 04-data-structures
go run pointers.go
```

### 05-advanced 高级特性

#### 结构体和方法

```bash
cd 05-advanced/01-structs
go run person.go
go run employee.go
```

#### 并发编程

```bash
cd 05-advanced/02-concurrency
go run goroutines.go
go run channels.go
```

#### 接口示例

```bash
cd 05-advanced/03-interfaces
go run interfaces.go
```

#### 错误处理

```bash
cd 05-advanced/04-error-handling
go run errors.go
```

### 06-frameworks 框架实践

#### 安装依赖

```bash
cd 06-frameworks
go mod download
```

#### Gin Web 框架

```bash
cd 01-gin
go run main.go
```

测试 API：

```bash
# 获取首页
curl http://localhost:8080/

# 健康检查
curl http://localhost:8080/health

# 创建用户（需要认证）
curl -X POST http://localhost:8080/api/v1/users \
  -H "Authorization: Bearer valid-token" \
  -H "Content-Type: application/json" \
  -d '{"name":"测试用户","email":"test@example.com","age":25}'
```

#### GORM 数据库操作

```bash
cd 02-gorm
# 注意：需要先配置数据库连接
# 修改 models.go 中的数据库连接字符串
go run models.go
```

### 07-projects 完整 Web API 项目

#### 安装依赖

```bash
cd 07-projects/01-web-api
go mod download
```

#### 配置环境变量（可选）

```bash
export DATABASE_URL="root:password@tcp(127.0.0.1:3306)/go_demo?charset=utf8mb4&parseTime=True&loc=Local"
export JWT_SECRET="your-secret-key-here"
export PORT="8080"
```

#### 启动 API 服务器

```bash
go run main.go
```

#### API 测试示例

1. **用户注册**

```bash
curl -X POST http://localhost:8080/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "email": "test@example.com", 
    "password": "password123",
    "first_name": "Test",
    "last_name": "User"
  }'
```

2. **用户登录**

```bash
curl -X POST http://localhost:8080/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "password123"
  }'
```

3. **获取用户资料（需要认证）**

```bash
# 使用登录返回的 token
curl -X GET http://localhost:8080/api/v1/users/profile \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

4. **创建任务**

```bash
curl -X POST http://localhost:8080/api/v1/tasks \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "学习Go语言",
    "description": "完成Go语言基础学习",
    "priority": "high",
    "status": "pending"
  }'
```

5. **获取任务列表**

```bash
curl -X GET "http://localhost:8080/api/v1/tasks?page=1&limit=10&status=pending" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## 常见问题解决

### 1. 依赖下载问题

```bash
# 清理模块缓存
go clean -modcache

# 设置代理（国内用户）
go env -w GOPROXY=https://goproxy.cn,direct
```

### 2. 数据库连接问题

- 确保 MySQL 服务正在运行
- 检查数据库连接字符串格式
- 确认数据库用户权限

### 3. 端口占用问题

```bash
# 查看端口占用
netstat -tulpn | grep :8080

# 杀死占用端口的进程
kill -9 PID
```

### 4. JWT Token 获取

1. 先调用注册 API 创建用户
2. 调用登录 API 获取 token
3. 在后续请求中使用 `Authorization: Bearer TOKEN` 头部

## 学习建议

### 代码阅读顺序

1. **基础概念**：先运行 05-advanced 中的代码，理解 Go 的核心概念
2. **框架实践**：学习 06-frameworks 中的 Gin 和 GORM 使用
3. **项目实战**：分析 07-projects 中的完整项目结构

### 实践建议

1. **逐行阅读代码注释**：每个文件都有详细的中文注释和 Java 对比
2. **修改代码实验**：尝试修改参数、添加功能，观察结果
3. **对比 Java 实现**：思考同样功能在 Java 中如何实现
4. **扩展练习**：基于现有代码添加新功能

### 调试技巧

1. **使用 fmt.Printf 调试**：在关键位置打印变量值
2. **启用详细日志**：在 GORM 中启用 SQL 日志
3. **使用 Go 工具**：`go fmt`, `go vet`, `go test`

## 下一步学习

完成这些代码的学习后，建议：

1. **深入学习测试**：编写单元测试和集成测试
2. **学习部署**：使用 Docker 容器化部署
3. **性能优化**：使用 pprof 进行性能分析
4. **微服务实践**：将项目拆分为微服务架构

## 技术支持

如果在运行代码过程中遇到问题：

1. 查看错误信息和日志
2. 检查环境配置和依赖版本
3. 参考 Go 官方文档
4. 搜索相关技术社区

祝学习愉快！🚀 